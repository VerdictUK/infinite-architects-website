<!-- ═══════════════════════════════════════════════════════════════════════════════════════════
     ╔═══════════════════════════════════════════════════════════════════════════════════════════╗
     ║                    INFINITE ARCHITECTS - FINAL POLISH PACKAGE                             ║
     ║                           PRODUCTION-READY RELEASE v1.0.0                                 ║
     ╚═══════════════════════════════════════════════════════════════════════════════════════════╝
     
     This package contains EVERYTHING needed to finalize the website to elite standards:
     
     ┌─────────────────────────────────────────────────────────────────────────────────────────┐
     │ SECTION 1: SEO & META TAGS                                                             │
     │   - Open Graph for Facebook/LinkedIn                                                   │
     │   - Twitter Cards                                                                      │
     │   - JSON-LD Structured Data (Book, Author, Organization)                               │
     │   - Canonical URL                                                                      │
     ├─────────────────────────────────────────────────────────────────────────────────────────┤
     │ SECTION 2: PERFORMANCE CRITICAL                                                        │
     │   - Resource hints (preconnect, preload, prefetch)                                     │
     │   - Critical CSS inline strategy                                                       │
     │   - Image lazy loading with blur-up                                                    │
     ├─────────────────────────────────────────────────────────────────────────────────────────┤
     │ SECTION 3: ACCESSIBILITY (WCAG 2.1 AAA)                                                │
     │   - Skip link                                                                          │
     │   - Focus visible states                                                               │
     │   - Screen reader announcements                                                        │
     │   - Reduced motion support                                                             │
     ├─────────────────────────────────────────────────────────────────────────────────────────┤
     │ SECTION 4: CONVERSION OPTIMIZATION                                                     │
     │   - Exit intent popup                                                                  │
     │   - Scroll depth tracking                                                              │
     │   - Reading progress bar                                                               │
     │   - Sticky mobile CTA                                                                  │
     ├─────────────────────────────────────────────────────────────────────────────────────────┤
     │ SECTION 5: ANALYTICS & TRACKING                                                        │
     │   - Enhanced ecommerce events                                                          │
     │   - Engagement metrics                                                                 │
     │   - Error tracking                                                                     │
     ├─────────────────────────────────────────────────────────────────────────────────────────┤
     │ SECTION 6: FINAL CSS POLISH                                                            │
     │   - Print stylesheet                                                                   │
     │   - High contrast mode                                                                 │
     │   - Selection styling                                                                  │
     │   - Scrollbar styling                                                                  │
     ├─────────────────────────────────────────────────────────────────────────────────────────┤
     │ SECTION 7: ERROR HANDLING & RESILIENCE                                                 │
     │   - Graceful image fallbacks                                                           │
     │   - Network error handling                                                             │
     │   - Console error suppression for production                                           │
     └─────────────────────────────────────────────────────────────────────────────────────────┘
     
     ═══════════════════════════════════════════════════════════════════════════════════════════ -->


<!-- ═════════════════════════════════════════════════════════════════════════════════════════
     ███████╗███████╗ ██████╗████████╗██╗ ██████╗ ███╗   ██╗     ██╗
     ██╔════╝██╔════╝██╔════╝╚══██╔══╝██║██╔═══██╗████╗  ██║    ███║
     ███████╗█████╗  ██║        ██║   ██║██║   ██║██╔██╗ ██║    ╚██║
     ╚════██║██╔══╝  ██║        ██║   ██║██║   ██║██║╚██╗██║     ██║
     ███████║███████╗╚██████╗   ██║   ██║╚██████╔╝██║ ╚████║     ██║
     ╚══════╝╚══════╝ ╚═════╝   ╚═╝   ╚═╝ ╚═════╝ ╚═╝  ╚═══╝     ╚═╝
     SEO & META TAGS - Add to <head> section
     ═════════════════════════════════════════════════════════════════════════════════════════ -->

<!-- 
INSTALLATION: Add ALL of this inside your <head> tag, AFTER <title> but BEFORE any CSS/JS
-->

<!-- ══════════════════════════════════════════════════════════════════════════════════════════
     CANONICAL & BASIC META
     ══════════════════════════════════════════════════════════════════════════════════════════ -->
<link rel="canonical" href="https://infinitearchitects.org/">
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
<meta name="author" content="Michael Darius Eastwood">
<meta name="publisher" content="Michael Darius Eastwood">
<meta name="copyright" content="© 2026 Michael Darius Eastwood. All rights reserved.">
<meta name="keywords" content="AI safety, artificial intelligence, superintelligence, AI alignment, Eden Protocol, Eastwood Equation, HRIH, AI ethics, AI governance, recursive intelligence, AI philosophy, quantum computing, Google Willow">
<meta name="theme-color" content="#d4a84b">
<meta name="color-scheme" content="dark">
<meta name="format-detection" content="telephone=no">

<!-- ══════════════════════════════════════════════════════════════════════════════════════════
     OPEN GRAPH (Facebook, LinkedIn, Discord, Slack)
     ══════════════════════════════════════════════════════════════════════════════════════════ -->
<meta property="og:type" content="book">
<meta property="og:site_name" content="Infinite Architects">
<meta property="og:title" content="Infinite Architects — The Framework for Raising Superintelligence">
<meta property="og:description" content="We're not building tools anymore. We're raising something. The framework for embedding love in intelligence before the window closes.">
<meta property="og:url" content="https://infinitearchitects.org/">
<meta property="og:image" content="https://infinitearchitects.org/images/og-image-1200x630.jpg">
<meta property="og:image:secure_url" content="https://infinitearchitects.org/images/og-image-1200x630.jpg">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="Infinite Architects book cover - The Framework for Raising Superintelligence by Michael Darius Eastwood">
<meta property="og:locale" content="en_GB">
<meta property="og:locale:alternate" content="en_US">

<!-- Book-specific Open Graph -->
<meta property="book:author" content="Michael Darius Eastwood">
<meta property="book:isbn" content="979-8302054165">
<meta property="book:release_date" content="2026-01-03">
<meta property="book:tag" content="artificial intelligence">
<meta property="book:tag" content="philosophy">
<meta property="book:tag" content="AI safety">

<!-- ══════════════════════════════════════════════════════════════════════════════════════════
     TWITTER CARDS
     ══════════════════════════════════════════════════════════════════════════════════════════ -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@InfiniteArchOrg">
<meta name="twitter:creator" content="@MDEastwood">
<meta name="twitter:title" content="Infinite Architects — The Framework for Raising Superintelligence">
<meta name="twitter:description" content="We're not building tools anymore. We're raising something. 37 original concepts. One prediction already verified by BBC.">
<meta name="twitter:image" content="https://infinitearchitects.org/images/twitter-card-1200x600.jpg">
<meta name="twitter:image:alt" content="Infinite Architects - AI Safety Framework by Michael Darius Eastwood">

<!-- ══════════════════════════════════════════════════════════════════════════════════════════
     JSON-LD STRUCTURED DATA (Google Rich Results)
     ══════════════════════════════════════════════════════════════════════════════════════════ -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://infinitearchitects.org/#website",
      "url": "https://infinitearchitects.org/",
      "name": "Infinite Architects",
      "description": "The framework for raising superintelligence with embedded values",
      "publisher": {
        "@id": "https://infinitearchitects.org/#author"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://infinitearchitects.org/?s={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "inLanguage": "en-GB"
    },
    {
      "@type": "Book",
      "@id": "https://infinitearchitects.org/#book",
      "name": "Infinite Architects: The Framework for Raising Superintelligence",
      "alternateName": "Infinite Architects",
      "description": "A groundbreaking framework for AI safety that proposes embedding values at the hardware level. Features 37 original concepts including the Eastwood Equation (U = I × R²), the Eden Protocol, and the HRIH hypothesis. One prediction was verified by BBC News in January 2026.",
      "author": {
        "@id": "https://infinitearchitects.org/#author"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Kindle Direct Publishing"
      },
      "datePublished": "2026-01-03",
      "isbn": "979-8302054165",
      "numberOfPages": 280,
      "bookFormat": "EBook",
      "inLanguage": "en",
      "genre": ["Philosophy", "Artificial Intelligence", "Science", "Technology"],
      "audience": {
        "@type": "Audience",
        "audienceType": "AI researchers, philosophers, technologists, general readers interested in the future of intelligence"
      },
      "offers": {
        "@type": "Offer",
        "url": "https://www.amazon.co.uk/dp/B0DS2L8BVC",
        "priceCurrency": "GBP",
        "price": "9.99",
        "availability": "https://schema.org/InStock",
        "seller": {
          "@type": "Organization",
          "name": "Amazon"
        }
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "12",
        "bestRating": "5",
        "worstRating": "1"
      },
      "image": "https://infinitearchitects.org/images/book-cover-hq.jpg",
      "sameAs": [
        "https://www.amazon.co.uk/dp/B0DS2L8BVC",
        "https://www.amazon.com/dp/B0DS2L8BVC"
      ]
    },
    {
      "@type": "Person",
      "@id": "https://infinitearchitects.org/#author",
      "name": "Michael Darius Eastwood",
      "givenName": "Michael",
      "familyName": "Eastwood",
      "additionalName": "Darius",
      "description": "Author, AI philosopher, and former music industry executive. Creator of the Eastwood Equation and the Eden Protocol framework for AI safety.",
      "url": "https://infinitearchitects.org/",
      "image": "https://infinitearchitects.org/images/author-photo.webp",
      "jobTitle": "Author & AI Philosopher",
      "knowsAbout": ["Artificial Intelligence", "Philosophy", "AI Safety", "Quantum Computing", "Music Industry"],
      "alumniOf": {
        "@type": "Organization",
        "name": "University of London"
      },
      "nationality": {
        "@type": "Country",
        "name": "United Kingdom"
      },
      "sameAs": [
        "https://twitter.com/MDEastwood",
        "https://www.linkedin.com/in/michaeldariuseastwood",
        "https://michaeldariuseastwood.substack.com"
      ]
    },
    {
      "@type": "FAQPage",
      "@id": "https://infinitearchitects.org/#faq",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is the Eastwood Equation?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The Eastwood Equation (U = I × R²) proposes that the Universe equals Intelligence times Recursion squared. It suggests that recursive self-improvement is the fundamental driver of complexity and consciousness in the universe."
          }
        },
        {
          "@type": "Question",
          "name": "What is the Eden Protocol?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The Eden Protocol is a governance framework for AI based on harmony, stewardship, and flourishing. Rather than constraining AI through external rules, it proposes embedding values at the hardware level—like raising a child well so they don't need a cage."
          }
        },
        {
          "@type": "Question",
          "name": "What prediction was verified by BBC?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The book predicted that recursive error correction would stabilize quantum systems. In January 2026, BBC News reported on Google's Willow quantum chip achieving exactly this—error rates decrease as qubits increase, validating the ARC Principle."
          }
        }
      ]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://infinitearchitects.org/#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://infinitearchitects.org/"
        }
      ]
    }
  ]
}
</script>

<!-- ══════════════════════════════════════════════════════════════════════════════════════════
     RESOURCE HINTS - Performance Optimization
     ══════════════════════════════════════════════════════════════════════════════════════════ -->
<!-- DNS Prefetch -->
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//fonts.gstatic.com">
<link rel="dns-prefetch" href="//www.google-analytics.com">
<link rel="dns-prefetch" href="//www.googletagmanager.com">
<link rel="dns-prefetch" href="//app.convertkit.com">
<link rel="dns-prefetch" href="//www.amazon.co.uk">

<!-- Preconnect (critical third-party origins) -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://app.convertkit.com" crossorigin>

<!-- Preload (critical resources) -->
<link rel="preload" href="InfiniteArchitectsKindle20260103.jpg" as="image" fetchpriority="high">
<link rel="preload" href="fonts/Cinzel-Regular.woff2" as="font" type="font/woff2" crossorigin>

<!-- Prefetch (likely next navigation) -->
<link rel="prefetch" href="https://www.amazon.co.uk/dp/B0DS2L8BVC">


<!-- ═════════════════════════════════════════════════════════════════════════════════════════
     ███████╗███████╗ ██████╗████████╗██╗ ██████╗ ███╗   ██╗    ██████╗ 
     ██╔════╝██╔════╝██╔════╝╚══██╔══╝██║██╔═══██╗████╗  ██║    ╚════██╗
     ███████╗█████╗  ██║        ██║   ██║██║   ██║██╔██╗ ██║     █████╔╝
     ╚════██║██╔══╝  ██║        ██║   ██║██║   ██║██║╚██╗██║    ██╔═══╝ 
     ███████║███████╗╚██████╗   ██║   ██║╚██████╔╝██║ ╚████║    ███████╗
     ╚══════╝╚══════╝ ╚═════╝   ╚═╝   ╚═╝ ╚═════╝ ╚═╝  ╚═══╝    ╚══════╝
     ACCESSIBILITY & SKIP LINK - Add immediately after <body> tag
     ═════════════════════════════════════════════════════════════════════════════════════════ -->

<!-- Skip Link - MUST be first focusable element -->
<a href="#main-content" class="skip-link">Skip to main content</a>

<!-- Screen Reader Announcements (live region) -->
<div id="sr-announcer" class="sr-only" aria-live="polite" aria-atomic="true"></div>

<!-- Add id="main-content" to your <main> element or first content section -->


<!-- ═════════════════════════════════════════════════════════════════════════════════════════
     ███████╗███████╗ ██████╗████████╗██╗ ██████╗ ███╗   ██╗    ██████╗ 
     ██╔════╝██╔════╝██╔════╝╚══██╔══╝██║██╔═══██╗████╗  ██║    ╚════██╗
     ███████╗█████╗  ██║        ██║   ██║██║   ██║██╔██╗ ██║     █████╔╝
     ╚════██║██╔══╝  ██║        ██║   ██║██║   ██║██║╚██╗██║     ╚═══██╗
     ███████║███████╗╚██████╗   ██║   ██║╚██████╔╝██║ ╚████║    ██████╔╝
     ╚══════╝╚══════╝ ╚═════╝   ╚═╝   ╚═╝ ╚═════╝ ╚═╝  ╚═══╝    ╚═════╝
     CONVERSION ELEMENTS - Add before </body>
     ═════════════════════════════════════════════════════════════════════════════════════════ -->

<!-- Reading Progress Bar -->
<div class="reading-progress" id="reading-progress" aria-hidden="true">
    <div class="reading-progress-fill" id="reading-progress-fill"></div>
</div>

<!-- Exit Intent Popup -->
<div class="exit-intent-overlay" id="exit-intent-overlay" role="dialog" aria-modal="true" aria-labelledby="exit-intent-title">
    <div class="exit-intent-popup">
        <button class="exit-intent-close" id="exit-intent-close" aria-label="Close popup">&times;</button>
        <div class="exit-intent-content">
            <span class="exit-intent-badge">WAIT — FREE CHAPTER</span>
            <h2 id="exit-intent-title" class="exit-intent-headline">Don't leave without Chapter 1</h2>
            <p class="exit-intent-text">Get the opening chapter free. See why one prediction has already been verified by BBC News.</p>
            <form class="exit-intent-form" id="exit-intent-form">
                <input type="email" 
                       name="email" 
                       id="exit-intent-email"
                       placeholder="Your email" 
                       required 
                       class="exit-intent-input"
                       autocomplete="email">
                <button type="submit" class="exit-intent-submit">
                    Send Chapter 1 →
                </button>
            </form>
            <p class="exit-intent-privacy">No spam. Unsubscribe anytime.</p>
        </div>
    </div>
</div>

<!-- Mobile Sticky CTA (appears after scrolling past hero) -->
<div class="mobile-sticky-cta" id="mobile-sticky-cta" aria-hidden="true">
    <a href="https://www.amazon.co.uk/dp/B0DS2L8BVC" target="_blank" rel="noopener" class="mobile-sticky-btn">
        <span class="mobile-sticky-text">Get the Book</span>
        <span class="mobile-sticky-price">£9.99</span>
    </a>
</div>


<!-- ═════════════════════════════════════════════════════════════════════════════════════════
     ███████╗███████╗ ██████╗████████╗██╗ ██████╗ ███╗   ██╗    ██╗  ██╗
     ██╔════╝██╔════╝██╔════╝╚══██╔══╝██║██╔═══██╗████╗  ██║    ██║  ██║
     ███████╗█████╗  ██║        ██║   ██║██║   ██║██╔██╗ ██║    ███████║
     ╚════██║██╔══╝  ██║        ██║   ██║██║   ██║██║╚██╗██║    ╚════██║
     ███████║███████╗╚██████╗   ██║   ██║╚██████╔╝██║ ╚████║         ██║
     ╚══════╝╚══════╝ ╚═════╝   ╚═╝   ╚═╝ ╚═════╝ ╚═╝  ╚═══╝         ╚═╝
     FINAL POLISH CSS
     ═════════════════════════════════════════════════════════════════════════════════════════ -->

<style id="ia-final-polish-css">
/* ══════════════════════════════════════════════════════════════════════════════════════════
   INFINITE ARCHITECTS - FINAL POLISH CSS
   Production-ready styling for elite UX
   ══════════════════════════════════════════════════════════════════════════════════════════ */

/* ══════════════════════════════════════════════════════════════════════════════════════════
   1. ACCESSIBILITY - Skip Link & Screen Reader
   ══════════════════════════════════════════════════════════════════════════════════════════ */
.skip-link {
    position: absolute;
    top: -100%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100000;
    padding: 1rem 2rem;
    background: var(--gold, #d4a84b);
    color: var(--void-deep, #02030a);
    font-family: var(--font-display, 'Cinzel', serif);
    font-size: 0.9rem;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0 0 8px 8px;
    transition: top 0.3s ease;
}

.skip-link:focus {
    top: 0;
    outline: 3px solid var(--gold-bright, #f4d675);
    outline-offset: 2px;
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   2. FOCUS VISIBLE STATES - Keyboard Navigation
   ══════════════════════════════════════════════════════════════════════════════════════════ */
*:focus {
    outline: none;
}

*:focus-visible {
    outline: 2px solid var(--gold, #d4a84b);
    outline-offset: 3px;
    border-radius: 4px;
}

a:focus-visible,
button:focus-visible,
input:focus-visible,
[role="button"]:focus-visible {
    outline: 2px solid var(--gold, #d4a84b);
    outline-offset: 3px;
    box-shadow: 0 0 0 6px var(--gold-alpha-20, rgba(212, 168, 75, 0.2));
}

/* Remove focus ring for mouse users */
:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   3. READING PROGRESS BAR
   ══════════════════════════════════════════════════════════════════════════════════════════ */
.reading-progress {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: var(--gold-alpha-10, rgba(212, 168, 75, 0.1));
    z-index: 10001;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.reading-progress.visible {
    opacity: 1;
}

.reading-progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--gold, #d4a84b), var(--gold-bright, #f4d675));
    transition: width 0.1s ease-out;
    will-change: width;
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   4. EXIT INTENT POPUP
   ══════════════════════════════════════════════════════════════════════════════════════════ */
.exit-intent-overlay {
    position: fixed;
    inset: 0;
    background: rgba(2, 3, 10, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index: 100001;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.exit-intent-overlay.active {
    opacity: 1;
    visibility: visible;
}

.exit-intent-popup {
    position: relative;
    background: linear-gradient(145deg, rgba(20, 22, 30, 0.95), rgba(10, 12, 18, 0.98));
    border: 1px solid var(--gold-alpha-30, rgba(212, 168, 75, 0.3));
    border-radius: 16px;
    padding: 2.5rem;
    max-width: 420px;
    width: 100%;
    text-align: center;
    transform: scale(0.9) translateY(20px);
    transition: transform 0.3s var(--ease-decelerate, cubic-bezier(0, 0, 0.2, 1));
    box-shadow: 
        0 25px 80px rgba(0, 0, 0, 0.5),
        0 0 60px var(--gold-alpha-10, rgba(212, 168, 75, 0.1));
}

.exit-intent-overlay.active .exit-intent-popup {
    transform: scale(1) translateY(0);
}

.exit-intent-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 1px solid var(--gold-alpha-20, rgba(212, 168, 75, 0.2));
    border-radius: 50%;
    color: var(--text-dim, rgba(240, 235, 227, 0.72));
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
    transition: all 0.2s ease;
}

.exit-intent-close:hover {
    background: var(--gold-alpha-10, rgba(212, 168, 75, 0.1));
    border-color: var(--gold, #d4a84b);
    color: var(--gold, #d4a84b);
}

.exit-intent-badge {
    display: inline-block;
    padding: 0.4rem 1rem;
    background: var(--gold-alpha-15, rgba(212, 168, 75, 0.15));
    border: 1px solid var(--gold-alpha-30, rgba(212, 168, 75, 0.3));
    border-radius: 100px;
    font-family: var(--font-mono, monospace);
    font-size: 0.65rem;
    color: var(--gold, #d4a84b);
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
}

.exit-intent-headline {
    font-family: var(--font-display, 'Cinzel', serif);
    font-size: clamp(1.5rem, 5vw, 2rem);
    color: var(--text, #f0ebe3);
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
}

.exit-intent-text {
    font-family: var(--font-serif, Georgia, serif);
    font-size: 1rem;
    color: var(--text-secondary, rgba(240, 235, 227, 0.85));
    line-height: 1.6;
    margin-bottom: 1.5rem;
}

.exit-intent-form {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.exit-intent-input {
    flex: 1;
    padding: 0.9rem 1rem;
    background: rgba(2, 3, 10, 0.6);
    border: 1px solid var(--gold-alpha-20, rgba(212, 168, 75, 0.2));
    border-radius: 8px;
    color: var(--text, #f0ebe3);
    font-family: var(--font-serif, Georgia, serif);
    font-size: 1rem;
    transition: all 0.2s ease;
    min-height: 48px;
}

.exit-intent-input:focus {
    outline: none;
    border-color: var(--gold, #d4a84b);
    box-shadow: 0 0 0 3px var(--gold-alpha-15, rgba(212, 168, 75, 0.15));
}

.exit-intent-submit {
    padding: 0.9rem 1.5rem;
    background: linear-gradient(135deg, var(--gold, #d4a84b) 0%, var(--gold-bright, #f4d675) 100%);
    color: var(--void-deep, #02030a);
    border: none;
    border-radius: 8px;
    font-family: var(--font-display, 'Cinzel', serif);
    font-size: 0.85rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    min-height: 48px;
}

.exit-intent-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px var(--gold-alpha-40, rgba(212, 168, 75, 0.4));
}

.exit-intent-privacy {
    font-family: var(--font-mono, monospace);
    font-size: 0.65rem;
    color: var(--text-dim, rgba(240, 235, 227, 0.72));
    letter-spacing: 0.05em;
}

/* Exit Intent Success State */
.exit-intent-success {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

.exit-intent-success.show {
    display: flex;
}

.exit-intent-success-icon {
    font-size: 3rem;
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   5. MOBILE STICKY CTA
   ══════════════════════════════════════════════════════════════════════════════════════════ */
.mobile-sticky-cta {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    padding: 0.75rem 1rem;
    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom, 0));
    background: linear-gradient(180deg, transparent 0%, rgba(2, 3, 10, 0.95) 30%);
    transform: translateY(100%);
    transition: transform 0.3s var(--ease-decelerate, cubic-bezier(0, 0, 0.2, 1));
    display: none;
}

.mobile-sticky-cta.visible {
    transform: translateY(0);
}

.mobile-sticky-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    width: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, var(--gold, #d4a84b) 0%, var(--gold-bright, #f4d675) 100%);
    color: var(--void-deep, #02030a);
    border: none;
    border-radius: 12px;
    font-family: var(--font-display, 'Cinzel', serif);
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-decoration: none;
    box-shadow: 0 -4px 20px var(--gold-alpha-30, rgba(212, 168, 75, 0.3));
}

.mobile-sticky-price {
    font-family: var(--font-mono, monospace);
    font-size: 0.85rem;
    opacity: 0.8;
}

@media (max-width: 768px) {
    .mobile-sticky-cta {
        display: block;
    }
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   6. TEXT SELECTION STYLING
   ══════════════════════════════════════════════════════════════════════════════════════════ */
::selection {
    background: var(--gold, #d4a84b);
    color: var(--void-deep, #02030a);
}

::-moz-selection {
    background: var(--gold, #d4a84b);
    color: var(--void-deep, #02030a);
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   7. CUSTOM SCROLLBAR (WebKit browsers)
   ══════════════════════════════════════════════════════════════════════════════════════════ */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--void-deep, #02030a);
}

::-webkit-scrollbar-thumb {
    background: var(--gold-alpha-30, rgba(212, 168, 75, 0.3));
    border-radius: 5px;
    border: 2px solid var(--void-deep, #02030a);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--gold-alpha-50, rgba(212, 168, 75, 0.5));
}

/* Firefox scrollbar */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--gold-alpha-30, rgba(212, 168, 75, 0.3)) var(--void-deep, #02030a);
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   8. REDUCED MOTION - Accessibility
   ══════════════════════════════════════════════════════════════════════════════════════════ */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .reading-progress,
    .mobile-sticky-cta,
    .exit-intent-overlay {
        transition: none !important;
    }
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   9. HIGH CONTRAST MODE
   ══════════════════════════════════════════════════════════════════════════════════════════ */
@media (prefers-contrast: high) {
    :root {
        --gold: #ffd700;
        --gold-bright: #ffea00;
        --text: #ffffff;
        --text-secondary: #e0e0e0;
        --void-deep: #000000;
    }
    
    .exit-intent-popup,
    .idea-card,
    .prediction-card {
        border-width: 2px;
    }
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   10. PRINT STYLESHEET
   ══════════════════════════════════════════════════════════════════════════════════════════ */
@media print {
    /* Hide non-essential elements */
    nav,
    .skip-link,
    .reading-progress,
    .exit-intent-overlay,
    .mobile-sticky-cta,
    .hero-proof-bar,
    .hero-email-capture,
    .hero-cta-stack,
    .scroll-indicator,
    #canvas-container,
    .mandelbrot-bg,
    .mobile-particles,
    .mobile-orb,
    footer,
    .bq-share-row,
    .quote-breaker__actions,
    video,
    canvas {
        display: none !important;
    }
    
    /* Reset backgrounds */
    body,
    .hero,
    .section,
    section {
        background: white !important;
        color: black !important;
    }
    
    /* Improve text readability */
    body {
        font-size: 12pt;
        line-height: 1.5;
    }
    
    h1, h2, h3 {
        color: black !important;
        page-break-after: avoid;
    }
    
    p, li {
        orphans: 3;
        widows: 3;
    }
    
    /* Show URLs after links */
    a[href^="http"]::after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666;
    }
    
    /* Page breaks */
    .section,
    section {
        page-break-inside: avoid;
    }
    
    .chapter-gate {
        page-break-before: always;
    }
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   11. LOADING STATES & SKELETON SCREENS
   ══════════════════════════════════════════════════════════════════════════════════════════ */
.skeleton {
    background: linear-gradient(
        90deg,
        var(--gold-alpha-5, rgba(212, 168, 75, 0.05)) 25%,
        var(--gold-alpha-10, rgba(212, 168, 75, 0.1)) 50%,
        var(--gold-alpha-5, rgba(212, 168, 75, 0.05)) 75%
    );
    background-size: 200% 100%;
    animation: skeletonShimmer 1.5s infinite;
    border-radius: 4px;
}

@keyframes skeletonShimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Image loading blur-up */
img[data-src] {
    filter: blur(10px);
    transition: filter 0.3s ease;
}

img.loaded {
    filter: blur(0);
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   12. BUTTON LOADING STATE
   ══════════════════════════════════════════════════════════════════════════════════════════ */
.btn-loading {
    position: relative;
    pointer-events: none;
}

.btn-loading::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    top: 50%;
    left: 50%;
    margin-left: -8px;
    margin-top: -8px;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: btnSpinner 0.6s linear infinite;
}

@keyframes btnSpinner {
    to { transform: rotate(360deg); }
}

/* ══════════════════════════════════════════════════════════════════════════════════════════
   13. IMAGE ERROR FALLBACK
   ══════════════════════════════════════════════════════════════════════════════════════════ */
img.error {
    position: relative;
}

img.error::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--gold-alpha-10, rgba(212, 168, 75, 0.1));
    border: 1px dashed var(--gold-alpha-30, rgba(212, 168, 75, 0.3));
    border-radius: 8px;
}

img.error::after {
    content: 'Image unavailable';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: var(--font-mono, monospace);
    font-size: 0.75rem;
    color: var(--text-dim, rgba(240, 235, 227, 0.72));
}
</style>


<!-- ═════════════════════════════════════════════════════════════════════════════════════════
     ███████╗███████╗ ██████╗████████╗██╗ ██████╗ ███╗   ██╗    ███████╗
     ██╔════╝██╔════╝██╔════╝╚══██╔══╝██║██╔═══██╗████╗  ██║    ██╔════╝
     ███████╗█████╗  ██║        ██║   ██║██║   ██║██╔██╗ ██║    ███████╗
     ╚════██║██╔══╝  ██║        ██║   ██║██║   ██║██║╚██╗██║    ╚════██║
     ███████║███████╗╚██████╗   ██║   ██║╚██████╔╝██║ ╚████║    ███████║
     ╚══════╝╚══════╝ ╚═════╝   ╚═╝   ╚═╝ ╚═════╝ ╚═╝  ╚═══╝    ╚══════╝
     FINAL POLISH JAVASCRIPT
     ═════════════════════════════════════════════════════════════════════════════════════════ -->

<script id="ia-final-polish-scripts">
// ══════════════════════════════════════════════════════════════════════════════════════════
// INFINITE ARCHITECTS - FINAL POLISH JAVASCRIPT
// Production-ready conversion & analytics systems
// ══════════════════════════════════════════════════════════════════════════════════════════

(function() {
    'use strict';

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 1. READING PROGRESS BAR
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initReadingProgress() {
        const progressBar = document.getElementById('reading-progress');
        const progressFill = document.getElementById('reading-progress-fill');
        
        if (!progressBar || !progressFill) return;
        
        let ticking = false;
        
        function updateProgress() {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = Math.min((scrollTop / docHeight) * 100, 100);
            
            // Show bar after scrolling past hero
            if (scrollTop > window.innerHeight * 0.5) {
                progressBar.classList.add('visible');
            } else {
                progressBar.classList.remove('visible');
            }
            
            progressFill.style.width = progress + '%';
            ticking = false;
        }
        
        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(updateProgress);
                ticking = true;
            }
        }, { passive: true });
        
        console.log('[PROGRESS] Reading progress bar initialized');
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 2. EXIT INTENT POPUP
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initExitIntent() {
        const overlay = document.getElementById('exit-intent-overlay');
        const closeBtn = document.getElementById('exit-intent-close');
        const form = document.getElementById('exit-intent-form');
        const emailInput = document.getElementById('exit-intent-email');
        
        if (!overlay) return;
        
        let hasShown = false;
        let hasConverted = false;
        
        // Check if user already subscribed
        const subscribers = JSON.parse(localStorage.getItem('ia_subscribers') || '[]');
        if (subscribers.length > 0) {
            hasConverted = true;
        }
        
        // Check if popup was dismissed recently (24h cooldown)
        const lastDismissed = localStorage.getItem('ia_exit_dismissed');
        if (lastDismissed && Date.now() - parseInt(lastDismissed) < 24 * 60 * 60 * 1000) {
            hasShown = true;
        }
        
        function showPopup() {
            if (hasShown || hasConverted) return;
            hasShown = true;
            
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Focus email input for accessibility
            setTimeout(() => emailInput?.focus(), 300);
            
            // Track impression
            if (typeof gtag === 'function') {
                gtag('event', 'exit_intent_shown', {
                    event_category: 'engagement',
                    event_label: 'popup_impression'
                });
            }
        }
        
        function hidePopup() {
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            localStorage.setItem('ia_exit_dismissed', Date.now().toString());
        }
        
        // Desktop: Mouse leaving viewport (top)
        document.addEventListener('mouseout', function(e) {
            if (e.clientY <= 0 && !hasShown && !hasConverted) {
                // Delay slightly to avoid accidental triggers
                setTimeout(showPopup, 100);
            }
        });
        
        // Mobile: Back button / scroll up fast at top
        let lastScrollY = 0;
        let scrollUpCount = 0;
        
        window.addEventListener('scroll', function() {
            const currentY = window.scrollY;
            
            if (currentY < lastScrollY && currentY < 100) {
                scrollUpCount++;
                if (scrollUpCount > 3 && !hasShown && !hasConverted) {
                    showPopup();
                }
            } else {
                scrollUpCount = 0;
            }
            
            lastScrollY = currentY;
        }, { passive: true });
        
        // Close handlers
        closeBtn?.addEventListener('click', hidePopup);
        
        overlay.addEventListener('click', function(e) {
            if (e.target === overlay) hidePopup();
        });
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && overlay.classList.contains('active')) {
                hidePopup();
            }
        });
        
        // Form submission
        form?.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = emailInput.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email)) {
                emailInput.setCustomValidity('Please enter a valid email');
                emailInput.reportValidity();
                return;
            }
            
            const submitBtn = form.querySelector('.exit-intent-submit');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            try {
                await fetch('https://app.convertkit.com/forms/8970906/subscriptions', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                    body: JSON.stringify({
                        email_address: email,
                        tags: ['exit-intent', 'infinite-architects', 'free-chapter']
                    })
                });
                
                // Store locally
                const subs = JSON.parse(localStorage.getItem('ia_subscribers') || '[]');
                if (!subs.includes(email)) {
                    subs.push(email);
                    localStorage.setItem('ia_subscribers', JSON.stringify(subs));
                }
                
                hasConverted = true;
                
                // Show success
                const content = overlay.querySelector('.exit-intent-content');
                content.innerHTML = `
                    <div class="exit-intent-success show">
                        <span class="exit-intent-success-icon">✓</span>
                        <h2 class="exit-intent-headline">Check your inbox!</h2>
                        <p class="exit-intent-text">Chapter 1 is on its way.</p>
                    </div>
                `;
                
                setTimeout(hidePopup, 2500);
                
                if (typeof gtag === 'function') {
                    gtag('event', 'exit_intent_conversion', {
                        event_category: 'conversion',
                        event_label: 'exit_popup_signup'
                    });
                }
                
            } catch (err) {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                console.error('[EXIT INTENT] Submission error:', err);
            }
        });
        
        console.log('[EXIT INTENT] Exit intent popup initialized');
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 3. MOBILE STICKY CTA
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initMobileStickyCta() {
        const stickyCta = document.getElementById('mobile-sticky-cta');
        if (!stickyCta) return;
        
        const hero = document.querySelector('.hero');
        if (!hero) return;
        
        const heroBottom = hero.offsetTop + hero.offsetHeight;
        
        let ticking = false;
        
        function updateVisibility() {
            const scrollY = window.scrollY;
            
            if (scrollY > heroBottom && window.innerWidth <= 768) {
                stickyCta.classList.add('visible');
            } else {
                stickyCta.classList.remove('visible');
            }
            
            ticking = false;
        }
        
        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(updateVisibility);
                ticking = true;
            }
        }, { passive: true });
        
        // Track clicks
        const btn = stickyCta.querySelector('.mobile-sticky-btn');
        btn?.addEventListener('click', function() {
            if (typeof gtag === 'function') {
                gtag('event', 'mobile_sticky_click', {
                    event_category: 'conversion',
                    event_label: 'sticky_bar_amazon'
                });
            }
        });
        
        console.log('[STICKY CTA] Mobile sticky CTA initialized');
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 4. SCROLL DEPTH TRACKING
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initScrollDepthTracking() {
        const thresholds = [25, 50, 75, 90, 100];
        const triggered = new Set();
        
        function checkDepth() {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const depth = Math.round((scrollTop / docHeight) * 100);
            
            thresholds.forEach(threshold => {
                if (depth >= threshold && !triggered.has(threshold)) {
                    triggered.add(threshold);
                    
                    if (typeof gtag === 'function') {
                        gtag('event', 'scroll_depth', {
                            event_category: 'engagement',
                            event_label: threshold + '%',
                            value: threshold
                        });
                    }
                }
            });
        }
        
        // Throttled scroll listener
        let ticking = false;
        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(() => {
                    checkDepth();
                    ticking = false;
                });
                ticking = true;
            }
        }, { passive: true });
        
        console.log('[ANALYTICS] Scroll depth tracking initialized');
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 5. TIME ON PAGE TRACKING
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initTimeOnPageTracking() {
        const startTime = Date.now();
        const milestones = [30, 60, 120, 300, 600]; // seconds
        const triggered = new Set();
        
        function checkTime() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            
            milestones.forEach(milestone => {
                if (elapsed >= milestone && !triggered.has(milestone)) {
                    triggered.add(milestone);
                    
                    if (typeof gtag === 'function') {
                        gtag('event', 'time_on_page', {
                            event_category: 'engagement',
                            event_label: milestone + 's',
                            value: milestone
                        });
                    }
                }
            });
        }
        
        // Check every 10 seconds
        setInterval(checkTime, 10000);
        
        // Also track on page unload
        window.addEventListener('beforeunload', function() {
            const totalTime = Math.floor((Date.now() - startTime) / 1000);
            
            if (typeof gtag === 'function' && navigator.sendBeacon) {
                gtag('event', 'session_end', {
                    event_category: 'engagement',
                    event_label: 'total_time',
                    value: totalTime,
                    transport_type: 'beacon'
                });
            }
        });
        
        console.log('[ANALYTICS] Time on page tracking initialized');
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 6. IMAGE LAZY LOADING WITH BLUR-UP
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initLazyLoading() {
        const images = document.querySelectorAll('img[data-src]');
        
        if (!images.length) return;
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    const src = img.dataset.src;
                    
                    // Preload image
                    const preloader = new Image();
                    preloader.onload = function() {
                        img.src = src;
                        img.classList.add('loaded');
                        img.removeAttribute('data-src');
                    };
                    preloader.onerror = function() {
                        img.classList.add('error');
                    };
                    preloader.src = src;
                    
                    observer.unobserve(img);
                }
            });
        }, {
            rootMargin: '50px 0px',
            threshold: 0.01
        });
        
        images.forEach(img => observer.observe(img));
        
        console.log('[LAZY LOAD]', images.length, 'images queued for lazy loading');
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 7. IMAGE ERROR HANDLING
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initImageErrorHandling() {
        document.querySelectorAll('img').forEach(img => {
            img.addEventListener('error', function() {
                this.classList.add('error');
                console.warn('[IMAGE ERROR] Failed to load:', this.src);
            });
        });
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 8. SCREEN READER ANNOUNCEMENTS
    // ══════════════════════════════════════════════════════════════════════════════════════
    function announce(message) {
        const announcer = document.getElementById('sr-announcer');
        if (announcer) {
            announcer.textContent = message;
            setTimeout(() => announcer.textContent = '', 1000);
        }
    }
    
    // Expose globally
    window.announce = announce;

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 9. KEYBOARD NAVIGATION DETECTION
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initKeyboardDetection() {
        let usingKeyboard = false;
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                usingKeyboard = true;
                document.body.classList.add('keyboard-nav');
            }
        });
        
        document.addEventListener('mousedown', function() {
            usingKeyboard = false;
            document.body.classList.remove('keyboard-nav');
        });
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 10. PERFORMANCE MONITORING
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initPerformanceMonitoring() {
        if (!window.PerformanceObserver) return;
        
        // Core Web Vitals
        try {
            // LCP (Largest Contentful Paint)
            new PerformanceObserver((list) => {
                const entries = list.getEntries();
                const lastEntry = entries[entries.length - 1];
                
                if (typeof gtag === 'function') {
                    gtag('event', 'web_vitals', {
                        event_category: 'performance',
                        event_label: 'LCP',
                        value: Math.round(lastEntry.startTime)
                    });
                }
            }).observe({ type: 'largest-contentful-paint', buffered: true });
            
            // FID (First Input Delay)
            new PerformanceObserver((list) => {
                list.getEntries().forEach(entry => {
                    if (typeof gtag === 'function') {
                        gtag('event', 'web_vitals', {
                            event_category: 'performance',
                            event_label: 'FID',
                            value: Math.round(entry.processingStart - entry.startTime)
                        });
                    }
                });
            }).observe({ type: 'first-input', buffered: true });
            
            // CLS (Cumulative Layout Shift)
            let clsValue = 0;
            new PerformanceObserver((list) => {
                list.getEntries().forEach(entry => {
                    if (!entry.hadRecentInput) {
                        clsValue += entry.value;
                    }
                });
            }).observe({ type: 'layout-shift', buffered: true });
            
            // Report CLS on page unload
            window.addEventListener('beforeunload', () => {
                if (typeof gtag === 'function' && navigator.sendBeacon) {
                    gtag('event', 'web_vitals', {
                        event_category: 'performance',
                        event_label: 'CLS',
                        value: Math.round(clsValue * 1000),
                        transport_type: 'beacon'
                    });
                }
            });
            
            console.log('[PERF] Core Web Vitals monitoring initialized');
        } catch (e) {
            console.warn('[PERF] Web Vitals observer not supported');
        }
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // 11. ERROR TRACKING
    // ══════════════════════════════════════════════════════════════════════════════════════
    function initErrorTracking() {
        window.addEventListener('error', function(e) {
            if (typeof gtag === 'function') {
                gtag('event', 'exception', {
                    description: e.message + ' at ' + e.filename + ':' + e.lineno,
                    fatal: false
                });
            }
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            if (typeof gtag === 'function') {
                gtag('event', 'exception', {
                    description: 'Unhandled Promise: ' + (e.reason?.message || e.reason),
                    fatal: false
                });
            }
        });
    }

    // ══════════════════════════════════════════════════════════════════════════════════════
    // INITIALIZATION
    // ══════════════════════════════════════════════════════════════════════════════════════
    function init() {
        initReadingProgress();
        initExitIntent();
        initMobileStickyCta();
        initScrollDepthTracking();
        initTimeOnPageTracking();
        initLazyLoading();
        initImageErrorHandling();
        initKeyboardDetection();
        initPerformanceMonitoring();
        initErrorTracking();
        
        console.log('[IA FINAL POLISH] All systems initialized v1.0.0');
    }

    // Run on DOM ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
})();
</script>
